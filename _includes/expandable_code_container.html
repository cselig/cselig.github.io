<div class="expandable-code-container">

<!-- transform path/to/file_name.ext to file-name-code -->
{% assign id=include.path |
          split: "/" |
          last |
          split: "." |
          first |
          slugify |
          append: "-code" %}

<p class="code-expand-button"
  data-toggle="collapse"
  data-target="#{{ id }}"
>click for code</p>

<!-- variables can't be passed to highlight, so if I wanted to
      use this component for other languages in the future I'd
      probably have to break out the highlight part into
      includes/highlight_{lang}.html or something
      https://github.com/jekyll/jekyll/issues/2952 -->
<div class="collapse code-container" id="{{ id }}">
{% highlight js %}
{% include {{ include.path }} %}
{% endhighlight %}
</div>

</div>